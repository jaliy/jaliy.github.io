!function(a){"use strict";var e=function(a){for(var e=1,t=arguments.length;e<t;e++){var n=arguments[e];for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];void 0!==o&&(a[i]=o)}}return a},t={formatSeconds:function(a){var e=parseInt(a),t=0,n=0;e>60&&(t=parseInt(e/60),e=parseInt(e%60),t>60&&(n=parseInt(t/60),t=parseInt(t%60)));var i=""+parseInt(e);return i=t>0?parseInt(t)+":"+i:"00:"+i,n>0&&(i=parseInt(n)+":"+i),i}},n=function(a){var t=['\t<video class="J_aa_video" src="{{aa-src}}" control="false" webkit-playsinline="true" x-webkit-airplay="true" playsinline="true" x5-playsinline></video>','\t<div class="J_aa_play aa-player-pause">','\t\t<a class="J_aa_icon aa-player-button aa-player-button-play" href="javascript:;"></a>',"\t</div>",'\t<div class="J_aa_controlbar aa-player-control-bar">','\t\t<div class="J_aa_process aa-player-process"><span class="aa-process"><em></em></span></div>','\t\t<a class="J_aa_control aa-player-button aa-player-button-play" href="javascript:;"></a>','\t\t<div class="aa-player-time"><span class="J_aa_played">00:00</span> / <span class="J_total">00:00</span></div>',"\t</div>",'\t<div class="J_aa_loading aa-player-loading"><div class="aa-player-loading-eff"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div></div>'].join("");return this.options=e({},this.options,a),this.container=document.createElement("div"),this.container.className="J_aa_container aa-player-container",this.container.innerHTML=t.replace(/{{aa-src}}/g,this.options.src),this._video=this.container.querySelector(".J_aa_video"),this._process=this.container.querySelector(".J_aa_process").querySelector("span"),this._played=this.container.querySelector(".J_aa_played"),this.options.width&&(this.container.style.width="number"==typeof this.options.width?this.options.width+"px":this.options.width),this.options.height&&(this.container.style.height="number"==typeof this.options.height?this.options.height+"px":this.options.height),this.options.el.appendChild(this.container),this._init(),this};n.prototype={options:{el:null,src:null,width:"100%",height:"100%",hideCtrl:!0,hideTime:1e3,autoplay:!1},container:null,_video:null,_process:null,_played:null,_timer:null,_init:function(){var a=this;this._video.addEventListener("loadedmetadata",function(){a.container.querySelector(".J_total").innerText=t.formatSeconds(a._video.duration)}),this._video.onplay=function(){var e=a.container.querySelector(".J_aa_control");a.container.querySelector(".J_aa_icon").style.display="none",e.className=e.className.replace(/aa-player-button-play/g,"aa-player-button-pause")},this._video.onpause=function(){var e=a.container.querySelector(".J_aa_control");a.container.querySelector(".J_aa_icon").style.display="block",e.className=e.className.replace(/aa-player-button-pause/g,"aa-player-button-play")},this.container.querySelector(".J_aa_play").addEventListener("click",function(){a._video.paused?a.play():a.pause()},!1),this.container.querySelector(".J_aa_control").addEventListener("click",function(){a._video.paused?a.play():a.pause()},!1),a._doProcess(),a._updateTime(),a._loading(),a.options.hideCtrl&&a._hideCtrl()},play:function(){this._video.play()},pause:function(){this._video.pause()},_updateTime:function(){var a=this;this._video.addEventListener("timeupdate",function(){var e=1e3*a._video.currentTime,n=1e3*a._video.duration,i=e/n*100;a._process.style.width=i+"%",a._played.innerText=t.formatSeconds(a._video.currentTime)},!1)},_doProcess:function(){var a=this;a.container.querySelector(".J_aa_process").addEventListener("click",function(e){var t=e.clientX-this.getBoundingClientRect().left,n=100*t/(100*this.offsetWidth);a._video.currentTime=a._video.duration*n},!1)},_loading:function(){var a=this;this._video.addEventListener("waiting",function(){a.container.querySelector(".J_aa_loading").style.display="flex"},!1),this._video.addEventListener("playing",function(){a.container.querySelector(".J_aa_loading").style.display="none"},!1)},_hideCtrl:function(){var a=this;this.container.addEventListener("mouseover",function(){clearTimeout(a._timer),a.container.querySelector(".J_aa_controlbar").style.opacity=".8"},!1),this.container.addEventListener("mouseout",function(){a._video.paused||(a._timer=setTimeout(function(){a.container.querySelector(".J_aa_controlbar").style.opacity="0"},a.options.hideTime))},!1)}},a.AAPlayer=n}(window);